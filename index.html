<!doctype html>
<html xmlns:ng="http://angularjs.org/">
<head>
  <meta charset="utf-8">
  <title>Musicology</title>
  <link rel="stylesheet" href="app.css"/>
</head>
<body>

  <div ng:controller="AnalyserCtrl">
    <div id="toneGenerator">
      <p>Tone generator</p>
      Sample rate: {{generator.sampleRate}},
      Buffer size: {{generator.bufferSize}},
      FFT size: {{generator.analyserNode.fftSize}},
      Frequency bins: {{generator.analyserNode.frequencyBinCount}}<br/>
      Buffer duration: {{generator.bufferSize / generator.sampleRate}} sec<br/>
      <br/>

      <div ng:controller="GeneratorCtrl" ng:init="setFunction()">
        <label>Function</label><br/>
        <input type="radio" name="functionName" value="sine" ng:change="setFunction()">Sine
        <input type="radio" name="functionName" value="square" ng:change="setFunction()">Square
        <input type="radio" name="functionName" value="triangle" ng:change="setFunction()">Triangle
        <br/>

        Frequency: <input type="text" name="frequency" value="{{generator.frequency}}" ng:change="setFrequency()"/>
      </div>

      <label>Playing</label>: {{playing}}<br/>
      <button name="playButton" ng:click="play()">Play</button>
      <button name="stopButton" ng:click="stop()">Stop</button>
    </div>

    <div id="waveform">
      <label>Waveform</label><br/>
      <canvas id="waveformCanvas" width="500" height="256"></canvas>
      <!--
      <p>Raw data</p>
      <p>
        <span ng:repeat="(k, v) in generator.samples">{{k}}: {{v}} </span>
      </p>
      -->
    </div>

    <hr/>
    <label>Spectrum</label><br/>

    Analyser smoothing: 
    <input type="text" value="{{generator.analyserNode.smoothingTimeConstant}}"/>&nbsp;

    Floor:
    <input type="text" size="4" value="{{generator.floor}}"/>db<br/>

    <canvas id="spectrumCanvas" width="1024" height="256"></canvas>
    <!--
    <p>Raw data</p>
    <p>
      <span ng:repeat="(k, v) in spectrum">{{k}}: {{v}} </span>
    </p>
    -->

    <hr/>

    

  </div>
 
 
  <script src="lib/angular-0.9.19.js" ng:autobind></script>
  <script src="js/services.js" ng:autobind></script>
  <script src="js/controllers.js" ng:autobind></script>
</body>
</html>

